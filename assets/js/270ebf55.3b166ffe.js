"use strict";(globalThis.webpackChunkblogseq=globalThis.webpackChunkblogseq||[]).push([[705],{3500:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>d});var n=i(8024),s=i(4848),a=i(8453);const o={title:"Creating the logseq-mediaplayer-plugin",authors:["benjypng"]},l=void 0,r={authorsImageUrls:[void 0]},d=[{value:"Scaffolding",id:"scaffolding",level:3},{value:"Approach",id:"approach",level:3},{value:"Conclusion",id:"conclusion",level:3},{value:"Caveat",id:"caveat",level:3}];function c(e){const t={a:"a",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"A user on Discord asked about an older plugin that allows a user to insert timestamps for their own uploaded videos. This is natively available for embedded YouTube videos, but not uploaded files."}),"\n",(0,s.jsxs)(t.p,{children:["I can't recall what was the older plugin, but given that locally uploaded media files are rendered in HTML, it should be relatively straightforward to derive and set the ",(0,s.jsx)(t.code,{children:"currentTime"})," through the DOM."]}),"\n",(0,s.jsx)(t.h3,{id:"scaffolding",children:"Scaffolding"}),"\n",(0,s.jsxs)(t.p,{children:["The plugin SDK has been updated to ",(0,s.jsx)(t.code,{children:"v0.2.8"}),". I've also decided to use ",(0,s.jsx)(t.code,{children:"npm"})," instead of ",(0,s.jsx)(t.code,{children:"pnpm"})," for development due to stability purposes."]}),"\n",(0,s.jsx)(t.h3,{id:"approach",children:"Approach"}),"\n",(0,s.jsx)(t.p,{children:"There should be 2 main features for the plugin:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Inserting timestamps"}),"\n",(0,s.jsx)(t.li,{children:"Retrieving timestamps"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["The most straightforward way (in my mind), is to access the DOM, and manipulate the ",(0,s.jsx)(t.code,{children:"<video>"})," element directly. For simplicity, the plugin will have to be opinionated in how it inserts timestamps. ",(0,s.jsx)(t.strong,{children:"Timestamps must be created as child blocks of the parent block where the video was inserted"}),". The plugin can then simply query the parent block when the user triggers a slach command to insert the timestamp."]}),"\n",(0,s.jsxs)(t.p,{children:["After getting the ",(0,s.jsx)(t.code,{children:"uuid"})," of the parent block, the plugin can use a ",(0,s.jsx)(t.code,{children:"querySelector"})," to query the element since all blocks in logseq have a ",(0,s.jsx)(t.code,{children:"div id"})," in the pattern ",(0,s.jsx)(t.code,{children:"ls-block-<uuid>"}),". From here, it was relatively straightforward to obtain the ",(0,s.jsx)(t.code,{children:"currentTime"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["In order for the user to navigate to a specific time in the video, the user will need to either click on a link or a button. In this case, a link will not be suitable since it is not trivial to use the link to manipulate a DOM element. Hence, I decided to use a button instead. This necessitated the use of ",(0,s.jsx)(t.code,{children:"onMacroRendererSlotted"})," to render the button and assign a function to it. Once again, this is relatively straightforward with the API, since it allows user-defined values to be passed as function arguments."]}),"\n",(0,s.jsx)(t.h3,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsxs)(t.p,{children:["The plugin was created quite quickly since the features are straightforward. To try it out, you may download the ",(0,s.jsx)(t.a,{href:"https://github.com/benjypng/logseq-mediatimestamp-plugin/releases",children:"release"})," and manually load it in Logseq."]}),"\n",(0,s.jsx)(t.h3,{id:"caveat",children:"Caveat"}),"\n",(0,s.jsxs)(t.p,{children:["Publishing plugins to the Logseq marketplace requires defining a ",(0,s.jsx)(t.code,{children:"manifest.json"}),". For plugins that access the Logseq DOM, instead of just the sandbox iframe, it requires adding ",(0,s.jsx)(t.code,{children:"effect: true"}),". I am not sure if this is the case still as I have not tried publishing this plugin to the marketplace yet."]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8024:e=>{e.exports=JSON.parse('{"permalink":"/blogseq/2025/12/01/creating-the-mediaplyer-plugin","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2025-12-01-creating-the-mediaplyer-plugin.md","source":"@site/blog/2025-12-01-creating-the-mediaplyer-plugin.md","title":"Creating the logseq-mediaplayer-plugin","description":"A user on Discord asked about an older plugin that allows a user to insert timestamps for their own uploaded videos. This is natively available for embedded YouTube videos, but not uploaded files.","date":"2025-12-01T00:00:00.000Z","tags":[],"readingTime":1.99,"hasTruncateMarker":false,"authors":[{"name":"benjypng","url":"https://github.com/benjypng","page":{"permalink":"/blogseq/authors/benjypng"},"key":"benjypng"}],"frontMatter":{"title":"Creating the logseq-mediaplayer-plugin","authors":["benjypng"]},"unlisted":false,"prevItem":{"title":"Trying out Gemini Jules","permalink":"/blogseq/2025/12/03/trying-out-gemini-jules"},"nextItem":{"title":"Experience using Logseq in the last 2 weeks","permalink":"/blogseq/2025/11/28/first-blog-post"}}')},8453:(e,t,i)=>{i.d(t,{R:()=>o,x:()=>l});var n=i(6540);const s={},a=n.createContext(s);function o(e){const t=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);